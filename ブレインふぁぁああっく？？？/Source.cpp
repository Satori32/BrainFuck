#include <iostream>
#include "BrainFuck.h"

//http://hakugetu.so.land.to/program/brainfuck/1-4.php

int main() {
	BrainFuck<char> BF;
	//BrainFuck<int> BF;

	std::string Hello = "+++++++++[>++++++++>+++++++++++>+++++<<<-]>.>++.+++++++..+++. > -.------------.<++++++++.--------.++ + .------.--------.>+.";
	std::string FuzzBuzz = "++++++[->++++ >> +> +> -<<<< < ] > [<++++ >> ++ + > ++++ >> ++ + > ++++ + > ++++ + >>>>>>++ >> ++ <<<<<<<<<<<<< < -]<++++>++ + > -- > ++ + > -> > --->++ >> > ++++ + [->++ > ++ << ]<<<<<<<<<<[->- [>>>>>> > ] > [<++ + >. > .>>>>.. >> > +< ]<<<<<-[>>>>]>[<++++ + >. > . > .. >> > +< ]>>>>+<-[<< < ]< [[-<< +>> ]>> > +> +<<<<<<[-> > +> +> -<<<<] < ] >> [[-]< ] > [>> > [> . << . << < ]<[.<<<<]>] > .<<<<<<<<<< < ]";
	std::string Prime = ">++++[<++++++++>-]>++++++++[<++++++>-]<++.<.> +.<.> ++.<.> ++.<.> ------..<.> .++.<.> --.++++++.<.> ------. > ++ + [<++ + >-] < -.<.> ------ - . + .<.> -.++++++ + .<.>------.--.<.> ++.++++.<.> -- - .-- - .<.> ++ + . - .<.> +.++ + .<.> --.--.<.> ++.++++.<.>-- - .---- - .<.> ++++ + . + .<.> .------.<.> ++++++.----.<.> ++++.++.<.> -.---- - .<.> ++++ + . + .<.> .--.";
	std::string S1 = "++++[>++++[>++++<-]<-]>>.";//64?
	std::string S2 = "++[>+<-]>.";//basic test.

	auto I = [](auto& o) {std::cin >> o; };
	auto O = [](auto& o) {std::cout << o; };
	auto E = [](auto& o) {std::cerr << "out of code :\' " << o.GetCode()[o.CodeIndex()] << "\' at " << o.CodeIndex() << std::endl; };

	//BF.Initialize(256, S1);
	//BF.Initialize(16, Hello);
	//BF.Initialize(256, FuzzBuzz);
	BF.Initialize(256, Prime);
	//BF.Interpret();
	BF.Interpret(O,I,E);
	return 0;
}